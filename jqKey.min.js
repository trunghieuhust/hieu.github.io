(function($){var setting=[];var d=document;var RangeId;var $df;window.onhelp=function(){if(window.event)window.event.returnValue=false;return false};$.fn.jqKey=function(options){var method=function(e){if(!setting.Active)return true;this.getCursorPosition=function(srcObj){var type=srcObj.type;var ln=0;var w;var wln=0;w=srcObj.value;wln=w.length;var s;switch(type){case "text":if(srcObj.selectionStart!=undefined)ln=srcObj.selectionStart;break;case "textarea":if(srcObj.selectionStart!=undefined)ln=srcObj.selectionStart;
break;default:ln=0;wln=0;break}return{First:ln==0,Last:ln==wln}};var Focus_Move=function($frmObjs,shift){var Focus_Check=function(o){try{o.focus();if(o.select&&o.type!="button")o.select();return true}catch(e$0){return false}};var isVisible=function(o,n){if(n==undefined)n=10;while(--n>0){if(o.tagName=="BODY")return true;var os=o.style;if(os.display=="none"||os.visibility=="hidden")return false;o=o.parentElement}return true};var ln=$frmObjs.length;if(ln<=0)return true;var i;for(i=0;i<ln;i++)if($frmObjs[i]==
obj)break;var mv=shift?-1:1;var j=(ln+i+mv)%ln;var Fo,Fs;var num=0;while(true){Fo=$frmObjs[j];Fs=Fo.style;if(Fo.type!="hidden"&&!Fo.disabled&&Fo.tabIndex!=-1&&isVisible(Fo))if(Focus_Check(Fo))break;else if(++num>50)break;j=(j+mv+ln)%ln}return false};var k=e.keyCode;var s=e.shiftKey;var c=e.ctrlKey;var a=e.altKey;var obj=e.target;var blKey=true;if(!setting.Enter&&k==13)return true;if(!setting.Tab&&k==9)return true;switch(k){case 32:switch(obj.type){case "radio":case "checkbox":setTimeout(function(){$(obj).trigger("click")},
0);blKey=false;break;default:}case 13:switch(obj.type){case "button":case "file":blKey=true;break;case "text":case "select-one":case "select-multiple":case "textarea":var CEln=setting.CtrlEnter.Names.length;if(c&&CEln>0){var dfln=$df.length;while(dfln-- >0){blKey=Focus_Move($df,false);obj=d.activeElement;for(var i=0;i<CEln;i++)if(obj.name==setting.CtrlEnter.Names[i])return false}blKey=true}else if(obj.type!="text-area")blKey=false;else blKey=true;break;default:blKey=false;break}if(!blKey)blKey=Focus_Move($df,
s);break;case 9:switch(obj.type){case "file":blKey=true;break;default:blKey=Focus_Move($df,s);break}break;case 8:switch(obj.type){case "text":case "textarea":blKey=true;break;default:blKey=confirm("backspace\u304c\u62bc\u3055\u308c\u307e\u3057\u305f\u3002\n\u524d\u30da\u30fc\u30b8\u3078\u79fb\u52d5\u3057\u307e\u3059\u304b\uff1f");break}break;case 27:if(setting.ESC){setting.ESC();blKey=false}break;case 38:if(setting.UpDown&&obj.name!="")blKey=Focus_Move(d.getElementsByName(obj.name),true);break;case 40:if(setting.UpDown&&
obj.name!="")blKey=Focus_Move(d.getElementsByName(obj.name),false);break;case 37:if(setting.LeftRight)if(getCursorPosition(obj).First)blKey=Focus_Move($df,true);break;case 39:if(setting.LeftRight)if(getCursorPosition(obj).Last)blKey=Focus_Move($df,false);break;default:if(k>=112&&k<=123){var fKeyNm="F"+(k-111);var F=setting["F"+(k-111)];if(F){if(window.event)window.event.keyCode=0;e.keyCode=0;blKey=false;F(obj,{shift:s,ctrl:c,alt:a,fKey:fKeyNm})}}break}return blKey};var bind=function(){var $o=$(":input[type!=hidden]",
RangeId);$df=$o.keydown(function(e){return method(e)})};var unbind=function(){$df.unbind("keydown")};var DOM_init=function(id){if(RangeId==undefined){if(setting.CtrlEnter.Names.length>0){$("<style type='text/css'>.jqKeyCtrlEnter{background-color:"+setting.CtrlEnter.bgColor+"}</style>").appendTo("head");$.each(setting.CtrlEnter.Names,function(idx,vl){$("[name='"+vl+"']").addClass("jqKeyCtrlEnter")})}}else unbind();RangeId=id;bind()};var defaults={"Enter":false,"Tab":false,"F1":null,"F2":null,"F3":null,
"F4":null,"F5":null,"F6":null,"F7":null,"F8":null,"F9":null,"F10":null,"F11":null,"F12":null,"ESC":null,"UpDown":false,"LeftRight":false,"CtrlEnter":{Names:[],bgColor:"lightblue"},"Active":true};if(typeof options=="string"){if(setting.length!=0)if(options=="disable")setting.Active=false;else if(options=="enable")setting.Active=true;else if(options=="dom")DOM_init(this);else if(options=="dispose"){setting=new Array;unbind()}return}else setting=$.extend(true,{},setting.length!=0?setting:defaults,options);
DOM_init(this);return this}})(jQuery);